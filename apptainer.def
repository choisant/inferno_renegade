BootStrap: docker
From: r-base

# Image for running the tests in modelfreeinference

%environment
	export R_LIBS_USER=R-packages

%post
	# Install software
	apt-get update -y
	apt-get install curl -y
	apt-get install xml2 -y
	apt-get install libfontconfig1-dev -y
	apt-get install libharfbuzz-dev libfribidi-dev -y
	apt-get install libfreetype6-dev libpng-dev libtiff5-dev libjpeg-dev -y
	apt-get install r-base-dev -y
	apt install build-essential libcurl4-openssl-dev libssl-dev libxml2-dev	
	Rscript -e "install.packages('devtools')"

%runscript
    mkdir R-packages
    Rscript -e "devtools::install($GITHUB_WORKSPACE)"
    Rscript -e "library('modelfreeinference')"
	if [ $? -eq 0 ]; then
        echo "Package modelfreeinference has been installed."
    else
        echo "Package modelfreeinference has not been installed."
        exit 1
    fi



